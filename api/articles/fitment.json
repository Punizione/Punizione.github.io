{"title":"博客的各种操作","slug":"fitment","date":"2017-12-10T12:42:52.000Z","updated":"2017-12-14T14:21:30.117Z","comments":true,"excerpt":"<p>最近可能会考虑把博客换个<code>theme</code>，现在的<code>theme</code>是<a href=\"https://github.com/pinggod/hexo-theme-apollo\" target=\"_blank\" rel=\"external\">apollo</a>，然后就被吐槽说没有排版… </p>\n<p>好吧既然如此我就换个<code>Material Design</code>的<code>theme</code>吧","content":"<p>最近可能会考虑把博客换个<code>theme</code>，现在的<code>theme</code>是<a href=\"https://github.com/pinggod/hexo-theme-apollo\" target=\"_blank\" rel=\"external\">apollo</a>，然后就被吐槽说没有排版… </p>\n<p>好吧既然如此我就换个<code>Material Design</code>的<code>theme</code>吧<a id=\"more\"></a></p>\n<h2 id=\"域名\"><a href=\"#域名\" class=\"headerlink\" title=\"域名\"></a>域名</h2><p>怎么说呢  </p>\n<p>感觉一直用<code>Github</code>的<code>Github Page</code>也不是很cool<br>所以就想着给博客 <del>上个buff</del> 加个个人域名</p>\n<p>在<a href=\"https://uk.godaddy.com/\" target=\"_blank\" rel=\"external\"><code>Godaddy</code></a>上逛了几圈之后觉得略贵..转向国内阿里的<a href=\"https://wanwang.aliyun.com/\" target=\"_blank\" rel=\"external\">万网</a></p>\n<p>选了个域名<code>delitto.top</code>  首付两块续费十六  </p>\n<p>顺带一提，<code>.net .com .cn</code>域名在国内需要实名认证和备案不然不能用<br><code>.top</code>的话就没有这种限制</p>\n<p>买好域名之后，在个人中心里面配置好DNS解析，万网会默认给你配两个国内的DNS地址，这里就不用管  </p>\n<p>添加一条IPv4解析和一条CNAME解析<br><img src=\"http://p0s30qphu.bkt.clouddn.com/17-12-11/5981637.jpg\" alt=\"res\"></p>\n<p>CNAME指向的是博客的<code>Github Page</code>的域名<code>xxx.github.io</code><br>IPv4指向的就是该域名的IP了，可以通过<code>ping xxx.github.io</code>来确定</p>\n<p>配置好后，等几分钟，访问<code>delitto.top</code>就能得到结果了</p>\n<h2 id=\"给个人域名上HTTPS\"><a href=\"#给个人域名上HTTPS\" class=\"headerlink\" title=\"给个人域名上HTTPS\"></a>给个人域名上HTTPS</h2><p>做完上面之后会发现，原先的<code>Github Page</code>本身有自带https，这是<code>Github</code>给你配的，但是如果我们使用个人域名的话，https就没了</p>\n<p>这时就要考虑给个人域名上https了，毕竟国内网络环境复杂，中间人劫持什么的都有，上个https还是很有必要的  </p>\n<p>但是问题来了</p>\n<p>虽然域名有了，但是现在用的服务器还是<code>Github</code>的，如果租个服务器的话就要考虑在国内各种备案各种申请，怪麻烦的，而且总觉得 <del>老大哥在看着你</del> 不是很有安全感<br>当然了国外的就没这么多限制，但是血贵</p>\n<p>有没有对<code>Github</code>托管的个人域名上https的方法？</p>\n<p>有的，就是<a href=\"https://www.cloudflare.com\" target=\"_blank\" rel=\"external\">CloudFlare</a>，这个服务商可以给你上一个半程的https，当你访问的时候，到CloudFlare是https，由CloudFlare去解析和访问你的博客是http，虽然是半程的但是对于个人博客来说也够了，这个操作需要把你的域名的解析商改成CloudFlare提供的解析商</p>\n<p>注册之后会让你绑定一个域名，针对这个域名选一个套餐，选免费的那个就可以了，功能足够使用</p>\n<p>进去之后设置DNS，把之前在万网的DNS设置copy到CloudFlare的DNS，然后把去万网把DNS服务商改成CloudFlare给你的DNS</p>\n<p>然后在CloudFlare的<code>Crypto</code>开启<code>Always use HTTPS</code>，这个选项可以让访问http的自动跳转到https</p>\n<h2 id=\"HSTS\"><a href=\"#HSTS\" class=\"headerlink\" title=\"HSTS\"></a>HSTS</h2><p>然后视个人情况开启<code>HTTP Strict Transport Security (HSTS)</code>，<code>HSTS</code>是啥呢，简单来说就是安全..，因为上面的<code>Always use HTTPS</code>设置，我们访问http站点的时候，服务器会通过304跳转到https站点，这时如果在http访问阶段就被中间人劫持，中间人完全可以伪造我们与服务器的https链接，这样的话https就形同虚设了  </p>\n<p>如果能在一开始浏览器检测到http的时候自动访问https，这样就不会有访问到服务器然后304的可能了，这时就需要开启<code>HSTS</code>，就需要的话把所有开关都打开，并把<code>max-age</code>调到1年，这样<code>HSTS</code>就设置完毕</p>\n<p>关于<code>HSTS</code>的更多详细可以参考这篇<a href=\"http://www.jianshu.com/p/caa80c7ad45c\" target=\"_blank\" rel=\"external\">文章</a></p>\n<p>经过上述步骤后，可以把我们的域名加入到<code>HSTS</code>的<code>Preload List</code>里面了，<code>Preload List</code>是什么呢？</p>\n<p>简单来说，<code>HSTS</code>还有个问题，就是哦我们的第一次访问总是且只能是http的，因为浏览器并不确定网站有没有开启https，通过一次304跳转后才知道，“哦这个网站有https，且在一年内都会用https”，如果在首次http访问的时候就已经被中间人劫持了，那后面的https就无从说起了</p>\n<p>所以我们需要<code>Preload List</code>，这个东西记录了哪些网站有https，我们开启<code>Preload List</code>后，可以去<code>HSTS</code><a href=\"https://hstspreload.org/\" target=\"_blank\" rel=\"external\">官网</a>测试一下我们的域名了，测试通过后就会把我们的域名加入到<code>Preload List</code>里面了，这需要几天的时间</p>\n","thumbnail":["http://p0s30qphu.bkt.clouddn.com/17-12-11/69893681.jpg"],"primarycolor":"blue","accentcolor":"orange","categories":[{"name":"hexo","path":"api/categories/hexo.json"}],"tags":[{"name":"hexo","path":"api/tags/hexo.json"},{"name":"https","path":"api/tags/https.json"},{"name":"域名","path":"api/tags/域名.json"}]}